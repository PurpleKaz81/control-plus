<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
  <a class="navbar-brand" href="/dashboard">
    <img src="https://i.ibb.co/XtzYw1p/Control-4-removebg-preview.png"/>
  </a>
  <% if user_signed_in? %>
  <div class="navbar-sign-in">
    <div class="navigation">
      <ul>
        <li class="list active">
          <a href="<%= dashboard_path %>">
            <span class="icon">
              <i class="fa-solid fa-house"></i>
            </span>
            <span class="text">Home</span>
          </a>
        </li>
        <li class="list">
          <a href="<%= tasks_path %>">
            <span class="icon">
              <i class="fa-solid fa-list-check"></i>
            </span>
            <span class="text">Tarefas</span>
          </a>
        </li>
        <li class="list">
          <a href="<%= finances_path %>">
            <span class="icon">
              <i class="fa-solid fa-brazilian-real-sign"></i>
            </span>
            <span class="text">FinanÃ§as</span>
          </a>
        </li>
        <div class="indicator"></div>  
      </ul>
    </div>
    <script>
      const list = document.querySelectorAll('.list')
      function activeLink(){
        list.forEach((item) =>
        item.classList.remove('active'));
        this.classList.add('active');
      }
      list.forEach((item) =>
        ['click','mouseover'].forEach( evt => 
        item.addEventListener(evt, activeLink))
      );       
    </script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
  </div>
  <div class="flex text-end">
    <div>
      <%= link_to  edit_user_registration_path, class: "nav-menu" do %>
        <span class="menu-font color-dark-green"><strong><%= "#{current_user.first_name} #{current_user.last_name}"  %></strong></span>
      <% end %>
      <%= link_to destroy_user_session_path, data: {turbo_method: :delete}, class: "nav-menu-avatar" do %>
        <i class="fa-solid fa-solid fa-arrow-right-from-bracket"><span class="menu-font-avatar"> Sair</span></i>
      <% end %>
  </div>
  <%= link_to edit_user_registration_path do %>
    <div class="nav-item">
      <% if current_user.photo.attached? %>
        <%= cl_image_tag current_user.photo.key, height: 40, width: 40, crop: :fill, class: "avatar" %>
      <% else  %>
        <i class="fa-solid fa-circle-user"></i>
      <% end %>
    </div>
  <% end %>
  </div>
  <% else %>
    <ul class="navbar-nav">
      <li class="nav-item">
        <%= link_to "Entrar", new_user_session_path, class: "nav-link btn2" %>
      </li>
      <li class="nav-item">
        <%= link_to "Cadastre-se", new_user_registration_path, class: "nav-link btn btn1" %>
      </li>
    </ul>
  <% end %>
</div>
